{"version":3,"mappings":"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","names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","url","axios","iconError","lightbox","renderGallery","images","galleryEl","markup","image","imagesLoaded","img","resolve","SimpleLightbox","clearGallery","showLoader","hideLoader","toggleLoadMoreButton","show","button","showMessage","message","__vitePreload","iziToast","form","input","loadMoreBtn","gallery","event","data","cardHeight","_a"],"ignoreList":[],"sources":["../src/js/pixabay-api.js","../src/img/octagon.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"47343859-71412f3a0c5519c6640fc8f75\";\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${perPage}&page=${page}`;\n\n    try {\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        throw new Error('Error fetching images');\n  }\n}","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20fill='none'%3e%3cg%20fill='%23FAFAFB'%20clip-path='url(%23a)'%3e%3cpath%20d='M6.81.219A.75.75%200%200%201%207.34%200h9.32a.75.75%200%200%201%20.53.219l6.591%206.591a.75.75%200%200%201%20.219.53v9.32a.75.75%200%200%201-.219.53l-6.591%206.591a.75.75%200%200%201-.53.219H7.34a.75.75%200%200%201-.53-.219L.219%2017.19A.75.75%200%200%201%200%2016.66V7.34a.75.75%200%200%201%20.219-.53L6.81.219ZM7.65%201.5%201.5%207.65v8.7l6.15%206.15h8.7l6.15-6.15v-8.7L16.35%201.5h-8.7Z'/%3e%3cpath%20d='M6.969%206.97a.75.75%200%200%201%201.062%200L12%2010.94l3.969-3.97a.75.75%200%201%201%201.062%201.061l-3.97%203.97%203.97%203.968a.753.753%200%200%201%200%201.062.749.749%200%200%201-1.062%200L12%2013.061l-3.969%203.97a.75.75%200%200%201-1.225-.243.751.751%200%200%201%20.163-.819L10.939%2012%206.97%208.031a.75.75%200%200%201%200-1.062Z'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='a'%3e%3cpath%20fill='%23fff'%20d='M0%200h24v24H0z'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e\"","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iconError from '../img/octagon.svg';\n\nlet lightbox;\n\nexport function renderGallery(images) {\n  const galleryEl = document.querySelector('.gallery');\n  const markup = images.map(image => `\n    <a href=\"${image.largeImageURL}\" class=\"gallery__item\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" class=\"gallery__image\" />\n      <div class=\"info\">\n        <p><b>Likes</b> ${image.likes}</p>\n        <p><b>Views</b> ${image.views}</p>\n        <p><b>Comments</b> ${image.comments}</p>\n        <p><b>Downloads</b> ${image.downloads}</p>\n      </div>\n    </a>\n  `).join('');\n  \n    galleryEl.insertAdjacentHTML('beforeend', markup);\n    \n    const imagesLoaded = Array.from(galleryEl.querySelectorAll('img')).map(img => {\n    return new Promise(resolve => {\n      img.onload = resolve;\n      img.onerror = resolve;\n    });\n  });\n  \n  Promise.all(imagesLoaded).then(() => {\n    galleryEl.classList.add('visible');\n    \n    if (!lightbox) {\n      lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    } else {\n      lightbox.refresh();\n    }\n  });    \n}\n\nexport function clearGallery() {\n  document.querySelector('.gallery').innerHTML = '';\n}\n\nexport function showLoader() {\n  document.querySelector('.loader').classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  document.querySelector('.loader').classList.add('hidden');\n}\n\nexport function toggleLoadMoreButton(show) {\n  const button = document.querySelector('.load-more');\n  if (show) {\n    button.classList.remove('hidden');\n  } else {\n    button.classList.add('hidden');\n  }\n}\n\nexport function showMessage(message) {\n  import('izitoast/dist/css/iziToast.min.css').then(() => {\n    import('izitoast').then(({ default: iziToast }) => {\n        iziToast.error({\n        iconUrl: iconError,\n        title: '',\n        message,\n        position: 'topRight',\n        messageColor: '#ffffff',\n        backgroundColor: '#ef4040',\n        iconColor: '#ffffff',\n        maxWidth: '432px',\n        iconText: '16px',\n      });\n    });\n  });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, clearGallery, showLoader, hideLoader, toggleLoadMoreButton, showMessage } from './js/render-functions.js';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('input[name=\"searchQuery\"]');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst gallery = document.querySelector('.gallery')\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  query = input.value.trim();\n\n  if (!query) {\n    showMessage('Please enter a search term!');\n    return;\n  }\n\n  page = 1;\n  clearGallery();\n  toggleLoadMoreButton(false);\n  showLoader();\n  input.value = '';\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n\n    if (data.hits.length === 0) {\n      showMessage('Sorry, no images found. Try a different query.');\n    } else {\n      renderGallery(data.hits);\n      toggleLoadMoreButton(data.hits.length === perPage);\n    }\n  } catch (error) {\n    showMessage('Please try again.');\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n  toggleLoadMoreButton(false);\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n    renderGallery(data.hits);\n\n    const cardHeight = gallery.firstElementChild?.getBoundingClientRect().height || 0;\n    if (cardHeight) {\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if (data.hits.length < perPage || data.totalHits <= page * perPage) {\n      toggleLoadMoreButton(false);\n      showMessage(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      toggleLoadMoreButton(true);\n    }\n  } catch (error) {\n    showMessage('Please try again.');\n  } finally {\n    hideLoader();\n\n    form.reset();\n  }\n});\n"],"file":"index.js"}